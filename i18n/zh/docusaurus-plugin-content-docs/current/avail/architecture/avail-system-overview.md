---
id: avail-system-overview
title: 系统概览
sidebar_label: System Overview
description: 了解 Avail 链的结构
keywords:
  - docs
  - polygon
  - avail
  - data
  - availability
  - architecture
image: https://wiki.polygon.technology/img/thumbnail/polygon-avail.png
slug: avail-system-overview
---

# 系统概览 {#system-overview}

## 模块性 {#modularity}

目前，单石块链结构（如以太坊）无法有效处理执行、结算和数据可用性。

将执行模块化为规模区块链，是以滚动为中心的链条模式试图做到的。当解决和数据可用层处于同一层上时，这可以很好地运作，即使用以太坊卷入的处理方法。然而，在进行卷入时仍存在必要的权衡，因为卷入施工可以更安全，取决于数据可用层的安全性，但其规模本身会更具挑战性。

然而，颗粒设计创建不同的层，以作为轻质协议，如微型服务。然后，整体网络将成为集成松散耦合轻量级协议的集合。一个例子是数据可用层，专门用于数据可用性。Polygon 阿维尔（Polygon Avail）是一个基于底层的两区块链，用于数据可用。

:::info Substrate 运行时

尽管Avail 基于质网代码库，但它包含对区块结构的修改，以阻止它与其他质网进行操作。Avail 实施了一个与波卡或 Kusama 无关的独立网络。

:::

Avail 向任何轻型客户端提供高质量的数据可用保证，但没有比任何其他网络更高的保证。Avail 侧重于通过利用 Kate 多项式承诺、删除编码和_其他_技术来证明区块数据是可用的，而不下载整个区块，从而使轻客户端（仅下载链头）能够有效和随机抽样抽样检查组数据的完整可用性。然而，与基于欺诈的DA系统有根本不同，[在](https://blog.polygon.technology/the-data-availability-problem-6b74b619ffcc/)此对此作了解释。

### 提供数据可用性 {#providing-data-availability}

DA 担保是客户端自行决定的；它不必相信节点。随着轻型客户端数量的增加，他们对整个区块进行集体抽样（即使每个客户端只抽样过小部分）。轻型客户端最终在他们之间形成一个 P2P 网络；因此，在抽样后，它可以获得高度的可用性——即便节点要下落（或试图审查区块），光型客户端也可以通过在他们之间共享部分来重新构建区块。

### 赋能新一代解决方案 {#enabling-the-next-set-of-solutions}

Avail 将在链上分配数据可用部分至 Poods 时进行转卷，因为链将数据可用部分分配到 Poods。Avail 也提供替代方法，用于启动任何独立链，因为链链可以卸载数据可用性。当然，存在着采用不同的模块化方法进行交易，但总体目标是在保持高度安全的同时能够进行规模。

交易成本也有所降低。Avail 可以增加区块大小，对验证者工作量的影响要小于单石链。当单块链增加区块大小时，验证者必须做更多的工作，因为区块必须执行，状态必须计算。由于Avail 没有执行环境，所以增加区块大小要便宜得多。由于需要计算 KZG 承诺并生成证明，成本不是零，但仍然廉价。

Avail 还可支持主权汇总。用户可以创建主权链，依赖于 Poods 验证者来就交易数据和秩序达成共识。Avail 上的主权卷入允许进行无缝升级，因为用户可以推出更新到特定应用节点来升级，以升级链，然后升级到新的结算逻辑。而在传统环境中，网络需要分叉。

:::info Avail 没有执行环境

Avail 并不运行智能合约，而是允许其他链接通过 Povil 来提供交易数据。这些链可以实施其执行环境，包括EVM、Wasm或其他任何东西。

:::

Avail 上的数据可用性可用于需要的时间窗口。例如，除了需要数据或重建外，安全性不会受到损害。

:::info Avail 不关心数据的用途

使用保证区块数据可用，但不在乎数据是什么。数据可以是交易，但也可以使用其他形式。

:::

另一方面，存储系统旨在长期储存数据，包括激励机制，以鼓励用户储存数据。

## 验证 {#validation}

### 对等验证 {#peer-validation}

通常，一个典型生态系统由三类对等点构成：

* 验证者**节点：**验证者从集成池中收集交易，执行交易，并生成一个候选区块，并附在网络上。区块包含一个小区块头，包含区块交易的摘要和元数据。
* **完整节点：**候选区块在整个网络上传播到完整节点，以进行核查。节点将重新执行候选区块中包含的交易。
* **轻型客户端：**光客户端只获取使用区块头进行核查，并视需要从周边的完整节点中获取交易详细信息。

虽然采用安全方法，但Avail 处理了该结构的局限性，以创建可靠性和增加保证。轻型客户端可以被利用到接受区块中，而其基本数据无法获得。区块生产者可以包含一个区块中的恶意交易，而不向网络透露其全部内容。如 Avail 文件中所述，这被称为数据可用问题。

Avail 的网络对等点包括：

* **验证者节点：**协议激励参与共识的完整节点。Avail 上的验证者节点不执行交易。它们将任意交易组合起来，并构建候选区块，为数据生成 KZG 承诺。**其他验证者检查生成区块正确。**

* **Avail (DA) 完整节点：**使用 Ploss 下载和提供所有区块数据的节点。同样，Avail 的完整节点不执行交易。

* **Avail (DA) 光客户端：**只下载区块头的客户端随机抽样抽样区块中小部分，以验证可用性。它们揭露了本地 API 可与 Avail 网络互动。

:::info Avail 的目标不是依赖完整节点来保持数据可用，

目的是向轻客户端提供类似的DA担保，作为完整节点。我们鼓励用户使用 Avail 的轻量级客户端。然而，他们仍然可以运行 Avail 完整节点，而这些节点得到充分支持。

:::

:::caution 本地 API 是一个 WIP，并且还不稳定


:::

这允许使用 Avail 应用程序嵌入 DA 光客户端。然后，他们就可以构建：

* **应用完整节点**
  - 嵌入 Avail (DA) 轻量级客户端
  - 下载特定 appID 的所有数据
  - 实施运行交易的执行环境
  - 保持应用程序的状态

* **应用程序轻型客户端**
  - 嵌入 Avail (DA) 轻量级客户端
  - 实施面向最终用户的功能

Avail 生态系统还将设置桥梁，以启用特定使用案例。此时设计的这种桥梁是_验证桥_，将发布在 Avail to Ethereum 上可用数据的验证，从而可以创建 Validium 上。

## 状态验证 {#state-verification}

### 区块核查 → DA 核查 {#da-verification}

#### 验证者 {#validators}

他们没有核查应用状态，而是集中精力确保可用已发布的交易数据并提供交易订单。只有当区块后面的数据可用时，该区块才会被视为有效。

使用者接受来到的交易，订购，构建候选区块，并向网络提出建议。区块包含特殊功能，特别是用于DA—去散编码和KZG 承诺。这是以特定格式进行的，因此客户端可以进行随机抽样，只下载单一应用程序的交易。

其他验证者通过确保区块格式正确、KZG 承诺签出、数据存在等来验证该区块。

#### 客户端 {#clients}

要求提供数据，阻止区块生产者发布区块头，而不发布其背后的数据，因为这使得客户无法阅读计算应用状态所需的交易。与其他链一样，Avail 使用数据可用性核查来解决这个问题，使用使用删除代码进行DA检查；这些检查在数据冗余设计中使用。

Errashury 代码有效重复数据，以便如果部分区块被压制，客户端可以使用区块的另一部分重新构建该部分。这意味着如果有节点试图隐藏该部分，则需要隐藏远为更大的部分。

> 该技术被应用于 CD-ROM 和多磁盘 (RAID) 阵列等设备（例如，如果硬盘驱动器失灵，则可更换该器件，并根据其他磁盘上的数据重建这部分数据）。

Avail 独特的在于，链式设计允许**任何人**检查 DA，而无需下载数据。DA 检查要求每个轻型客户端从链中每个区块中抽样抽样数量最小的随机批量。一组轻型客户端可以以这种方式集体抽样抽样检查整个区块链。因此，存在越多的不共识节点就越安全存在，区块大小（和输入量）就越大。意思的、不共识的节点可以促进网络的输入和安全性。

### 交易结算 {#transaction-settlement}

Avail 使用通过 Polygon Edge 构建的结算层。解决层提供一个与 EVM 兼容的区块链，用于进行卷宗储存数据并执行纠纷解决方案。结算层使用 Polygon  Avail 来进行其 DA 处理。当卷入使用清算层时，他们还继承所有 DA “ Ploss”属性。

:::note 不同的结算方法

使用 Ploss 方法不同，validium 不会使用解决层，而是在以太机上解决。

:::

Avail 提供数据托管和排序功能。执行层可能来自多个脱链缩放解决方案或旧的执行层。解决层使用核查和争议解决组件。

## 资源 {#resources}

- [Polygon 发布的 Avail 导言。](https://medium.com/the-polygon-blog/introducing-avail-by-polygon-a-robust-general-purpose-scalable-data-availability-layer-98bc9814c048)
- [Polygon 访谈：Polygon Avail](https://www.youtube.com/watch?v=okqMT1v3xi0)
